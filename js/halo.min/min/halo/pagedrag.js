halo.use(function(a){var b=a.webkit,c=a.addClass,d=a.removeClass;a.stylesheet(".PAGE_DRAG_KEEP{"+b+"transition:"+b+"transform .3s linear;}"),a.stylesheet(".PAGE_DRAG_H_KEEP{"+b+"transition:"+b+"transform .2s linear;}"),a.stylesheet(".PAGE_DRAG_RESTORE{"+b+"transition:"+b+"transform .1s linear;}");var e=function(a,b,c){b=b.replace(/\-/g,"\\-");var d=[0];if(arguments.length>2)for(var e=2;e<arguments.length;++e)d[e-2]=arguments[e];if("none"==a||""==a)return null;var f=new RegExp(b+"\\(([^\\)]+)\\)","ig"),g=a.match(f),h=[],i=[];if(g&&g.length>0){g=g[0],h=g.replace(f,"$1").split(",");for(var e=0;e<d.length;++e)i.push(h[d[e]])}return 1==i.length?i=i[0]:c&&(i=i[c]),i};halo.add("pagedrag",function(){var f=document.documentElement.clientHeight,g=document.documentElement.clientWidth;window.addEventListener("resize",function(){f=document.documentElement.clientHeight,g=document.documentElement.clientWidth},!1);var h=function(h,i,j){!j||(j="Y"),i="X"==i.toUpperCase()?"X":"Y";var k="X"==i?"PAGE_DRAG_H_KEEP":"PAGE_DRAG_KEEP",m=h.scrollHeight,n=h.scrollWidth,o="X"==i?Math.ceil(n/g):Math.ceil(m/f),p=0,q=-1,r=1,s=0,t=0,u=0,v=0,w=0,x="none",y=!1,z=function(a){if(!y){var c=a.targetTouches||a.changedTouches,d=h.style[b+"transform"]||"";s=c[0].pageX,u=parseInt(e(d,"translate3d",0))||0,t=c[0].pageY,v=parseInt(e(d,"translate3d",1))||0,w=0,n||m||(m=h.scrollHeight,n=h.scrollWidth,o="X"==i?Math.ceil(n/g):Math.ceil(m/f),r=G(p+1),q=G(p-1)),x="none"}},A=function(c){if(c.preventDefault(),c.stopPropagation(),!y){var d=c.targetTouches||c.changedTouches,e=d[0].pageX,f=d[0].pageY;if(j&&"none"==x){var g=e-s,k=f-t;if(Math.abs(g)==Math.abs(k))return c.preventDefault(),c.stopPropagation(),void 0;if(x=Math.abs(g)>Math.abs(k)?"X":"Y",x!=i)return a.off(h,"touchmove",A,!1),a.off(h,"release",B,!1),a.on(h,"release",C,!1),void 0}"X"==i?(w=e-s,this.style[b+"transform"]="translate3d("+(u+w)+"px,0,0)"):(w=f-t,this.style[b+"transform"]="translate3d(0,"+(v+w)+"px,0)")}},B=function(a){y=!0,j&&a.stopPropagation();var c=(a.targetTouches||a.changedTouches,H.offset||50);Math.abs(w)<c||0>w&&p==o-1||w>0&&0==p?F():0>w?E(r):E(q)},C=function(){a.off(this,"release",C,!1),a.on(h,"touchmove",A,!1),a.on(h,"release",B,!1)},D=function(b){a.off(b,"touchstart",z,!1),a.off(b,"touchmove",A,!1),a.off(b,"touchend",B,!1)},E=function(a,e){e="undefined"==typeof e?!1:e,e||c(h,k),h.style[b+"transform"]="X"==i?"translate3d(-"+a*g+"px,0,0)":"translate3d(0,-"+a*f+"px,0)",setTimeout(function(){d(h,k),"function"==typeof H.page_change&&H.page_change(p,a),p=a,r=p+1,q=p-1,p=G(p),r=G(r),q=G(q),y=!1},300)},F=function(){h.style[b+"transform"]="X"==i?"translate3d(-"+p*g+"px,0,0)":"translate3d(0,-"+p*f+"px,0)",setTimeout(function(){y=!1},100)},G=function(a){return o?a>=0?a%o:o+a%o:a};a.on(h,"touchstart",z,!1),a.on(h,"touchmove",A,!1),a.on(h,"release",B,!1),a.on(h,"forcerelease",B,!1);var H={unbind:D,move:E};return H};return{bind:h}}())});