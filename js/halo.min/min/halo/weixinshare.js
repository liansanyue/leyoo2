halo.use(function(){function d(){WeixinJSBridge.on("menu:share:appmessage",e),WeixinJSBridge.on("menu:share:timeline",f)}function e(){var a={};for(var d in c)a[d]=b[d]||"";a.appid||delete a.appid,WeixinJSBridge.invoke("sendAppMessage",a,function(a){g(a.err_msg)})}function f(){var a={};for(var d in c)a[d]=b[d]||"";a.appid||delete a.appid,b.useTitle||(a.title=b.desc),b.friendsDesc&&(a.title=b.friendsDesc),WeixinJSBridge.invoke("shareTimeline",a,function(a){g(a.err_msg)})}function g(a){var c=a.indexOf("ok")>=0||a.indexOf("confirm")?"ok":a.indexOf("cancel")>=0?"cancel":"fail";"function"==typeof b.cb&&b.cb(c)}var b={},c={link:"",img_url:"",desc:"",title:"",img_width:80,img_height:80,appid:""};"object"==typeof WeixinJSBridge&&"function"==typeof WeixinJSBridge.invoke?d():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",d,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",d),document.attachEvent("onWeixinJSBridgeReady",d)),halo.add("weixinshare",function(a,c,d,e,f,g,h){if("object"==typeof a)b=a;else{if("string"!=typeof a)throw b=void 0,"url expect string type";b={link:a,img_url:c||"",desc:e||"",title:d||"",img_width:f||80,img_height:g||80},h&&(b.appid=h)}return b})});